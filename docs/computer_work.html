<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Computer Work</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">ECON 402</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Overview</a>
</li>
<li>
  <a href="notes.html">Notes</a>
</li>
<li>
  <a href="labor_market_friday.html">Labor Market Friday in R</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Computer Work</h1>

</div>


<div id="okuns-law" class="section level1">
<h1>Okun’s law</h1>
<p>Professor House mentioned the “statistical pattern” known as Okun’s law in class. From the “Lecture_2_handouts”: <span class="math display">\[
\% \Delta \text{GDP} \approx 3 \% - 2 \% \times \Delta \text{unemployment rate}.
\]</span> Plotting this relationship involves two steps. We first need to grab the data from FRED. Second, we need to regress the percent change in GDP against the change in the unemployment rate to uncover estimates of the two above parameters that define the linear relationship. The R code replicates figure 10-4 in Mankiw, 9e, p 286.</p>
<div id="getting-the-data-from-fred" class="section level2">
<h2>Getting the data from FRED</h2>
<p>The first step is getting the data from FRED and creating annual averages of the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(lubridate)
<span class="kw">library</span>(tidyquant)
dat &lt;-<span class="st"> </span><span class="kw">tq_get</span>(<span class="kw">c</span>(<span class="st">&quot;UNRATE&quot;</span>, <span class="st">&quot;GDPC1&quot;</span>), 
              <span class="dt">get =</span> <span class="st">&quot;economic.data&quot;</span>,
              <span class="dt">from =</span> <span class="st">&quot;1940-01-01&quot;</span>)
<span class="co"># &quot;Spread&quot; the data</span>
dat &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">spread</span>(<span class="dt">key =</span> symbol, <span class="dt">value =</span> price) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year =</span> <span class="kw">year</span>(date)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>date)
<span class="co"># Get annual averages</span>
by_year &lt;-<span class="st"> </span><span class="kw">group_by</span>(dat, year)
dat &lt;-<span class="st"> </span><span class="kw">summarise_all</span>(by_year, mean, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="kw">head</span>(dat)</code></pre></div>
<pre><code>## # A tibble: 6 x 3
##    year GDPC1 UNRATE
##   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1  1947  1939 NaN   
## 2  1948  2020   3.75
## 3  1949  2009   6.05
## 4  1950  2184   5.21
## 5  1951  2360   3.28
## 6  1952  2456   3.02</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(dat)</code></pre></div>
<pre><code>## # A tibble: 6 x 3
##    year GDPC1 UNRATE
##   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1  2012 15355   8.07
## 2  2013 15612   7.36
## 3  2014 16013   6.18
## 4  2015 16472   5.27
## 5  2016 16716   4.87
## 6  2017 17033   4.35</code></pre>
<p>We’re interested in the percent change in real GDP and the difference in the unemployment rates:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Calculate percent change in rGDP and the difference in the unemployment rate</span>
dat &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gdp =</span> <span class="dv">100</span><span class="op">*</span>(GDPC1 <span class="op">/</span><span class="st"> </span><span class="kw">lag</span>(GDPC1) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>),
         <span class="dt">ur =</span> UNRATE <span class="op">-</span><span class="st"> </span><span class="kw">lag</span>(UNRATE))</code></pre></div>
</div>
<div id="estimating-the-pattern" class="section level2">
<h2>Estimating the pattern</h2>
<p>At this point we’re ready to estimate the relationship between the percentage change in real GDP and the change in the unemployment rate posited by Okun:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Run the regression</span>
okun &lt;-<span class="st"> </span><span class="kw">lm</span>(gdp <span class="op">~</span><span class="st"> </span>ur, <span class="dt">data =</span> dat)
<span class="kw">print</span>(okun)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = gdp ~ ur, data = dat)
## 
## Coefficients:
## (Intercept)           ur  
##       3.180       -1.748</code></pre>
<p>With rounding, we’re at the coefficients mentioned in class, which is a minor victory.</p>
<p>The last step is plotting the data. To do so, we need to add the regression line:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">xur &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">3</span>)
reg_line &lt;-<span class="st"> </span>okun<span class="op">$</span>coefficients[[<span class="dv">1</span>]] <span class="op">+</span><span class="st"> </span>okun<span class="op">$</span>coefficients[[<span class="dv">2</span>]]<span class="op">*</span>xur
fit &lt;-<span class="st"> </span><span class="kw">tibble</span>(xur, reg_line)

<span class="kw">ggplot</span>(<span class="dt">data =</span> dat) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> ur, <span class="dt">y =</span> gdp)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> xur, <span class="dt">y =</span> reg_line), 
            <span class="dt">data =</span> fit,
            <span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>, 
            <span class="dt">size =</span> <span class="fl">1.2</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Change in the unemployment rate&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Percentage change in real GDP&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Okun&#39;s law&quot;</span>)</code></pre></div>
<p><img src="computer_work_files/figure-html/unnamed-chunk-4-1.png" width="672" /> Just fyi: you can add a regression line in R without having to run the regression using R’s built-in commands. I did these calculations by hand just for practice.</p>
</div>
</div>
<div id="real-interest-rates-from-homework-1" class="section level1">
<h1>Real interest rates from homework 1</h1>
<p>Read in the data that is provided on Canvas:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(lubridate)
dat &lt;-<span class="st"> </span>readxl<span class="op">::</span><span class="kw">read_excel</span>(<span class="st">&quot;../PS1-data_2018.xlsx&quot;</span>)
<span class="kw">head</span>(dat)</code></pre></div>
<pre><code>## # A tibble: 6 x 4
##    Year Month  CPIU FEDFUNDS
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
## 1  1960  1.00  29.4     3.99
## 2  1960  2.00  29.4     3.97
## 3  1960  3.00  29.4     3.84
## 4  1960  4.00  29.5     3.92
## 5  1960  5.00  29.6     3.85
## 6  1960  6.00  29.6     3.32</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(dat)</code></pre></div>
<pre><code>## # A tibble: 6 x 4
##    Year Month  CPIU FEDFUNDS
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
## 1  2017  6.00   244     1.04
## 2  2017  7.00   244     1.15
## 3  2017  8.00   245     1.16
## 4  2017  9.00   246     1.15
## 5  2017 10.0    247     1.15
## 6  2017 11.0    248     1.16</code></pre>
<p>Next we want to compute the inflation rate as a percent change at an annual rate. The formula for computing a compounded annual rate of change is <span class="math display">\[
\left[ \left( \frac{x_t}{x_{t-1}} \right)^{\text{number obs per year}} - 1 \right] \times 100,
\]</span> where <span class="math inline">\(x_t\)</span> is the value of the series at time <span class="math inline">\(t\)</span>. For monthly data the number of observations per year is <span class="math inline">\(12\)</span>. A useful overview of similar transformations is available at the FRED <a href="https://fredhelp.stlouisfed.org/fred/data/understanding-the-data/formulas-calculate-growth-rates/">website</a>. To accomplish this in R we can use the <code>lag</code> command:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">LCPIU =</span> <span class="kw">lag</span>(CPIU))
<span class="kw">head</span>(dat)</code></pre></div>
<pre><code>## # A tibble: 6 x 5
##    Year Month  CPIU FEDFUNDS LCPIU
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
## 1  1960  1.00  29.4     3.99  NA  
## 2  1960  2.00  29.4     3.97  29.4
## 3  1960  3.00  29.4     3.84  29.4
## 4  1960  4.00  29.5     3.92  29.4
## 5  1960  5.00  29.6     3.85  29.5
## 6  1960  6.00  29.6     3.32  29.6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(dat)</code></pre></div>
<pre><code>## # A tibble: 6 x 5
##    Year Month  CPIU FEDFUNDS LCPIU
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
## 1  2017  6.00   244     1.04   244
## 2  2017  7.00   244     1.15   244
## 3  2017  8.00   245     1.16   244
## 4  2017  9.00   246     1.15   245
## 5  2017 10.0    247     1.15   246
## 6  2017 11.0    248     1.16   247</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">infl =</span> <span class="dv">100</span><span class="op">*</span>((CPIU <span class="op">/</span><span class="st"> </span>LCPIU)<span class="op">^</span><span class="dv">12</span> <span class="op">-</span><span class="st"> </span><span class="dv">1</span>),
         <span class="dt">datem =</span> <span class="kw">ymd</span>(<span class="kw">paste0</span>(Year, <span class="st">&quot;-&quot;</span>, Month, <span class="st">&quot;-01&quot;</span>)))

dat &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(datem <span class="op">&lt;=</span><span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;2015-11-01&quot;</span>),
         datem <span class="op">&gt;=</span><span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1960-01-01&quot;</span>))
<span class="kw">ggplot</span>(<span class="dt">data =</span> dat) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> datem, <span class="dt">y =</span> infl)) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Percent per year&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Inflation&quot;</span>)</code></pre></div>
<p><img src="computer_work_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Now we can compute the <em>ex post</em> real interest rate: <span class="math display">\[
r = FEDFUNDS - infl.
\]</span></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">r =</span> FEDFUNDS <span class="op">-</span><span class="st"> </span>infl)</code></pre></div>
<p>And plot the resulting series:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> dat) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> datem, <span class="dt">y =</span> r)) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Percent per year&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Real interest rates&quot;</span>)</code></pre></div>
<p><img src="computer_work_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">avg &lt;-<span class="st"> </span><span class="kw">mean</span>(dat<span class="op">$</span>r, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>The real interest rate in 2015-11-01 is -1.7170486. The average real interest rate over the sample is 1.3685639.</p>
<p>Ideally you’d like to list those numbers using R code. Here’s the code I used: <code>max(dat$datem)</code> and <code>dat$r[[which(dat$datem == max(dat$datem))]]</code>. Putting an <code>r</code> in from of those commands lists the output within the R markdown, resulting in the output you see above.</p>
<p>We can add recession shading and the sample avarage:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">recessions_df &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="kw">textConnection</span>(
<span class="st">&quot;Peak, Trough</span>
<span class="st">1857-06-01, 1858-12-01</span>
<span class="st">1860-10-01, 1861-06-01</span>
<span class="st">1865-04-01, 1867-12-01</span>
<span class="st">1869-06-01, 1870-12-01</span>
<span class="st">1873-10-01, 1879-03-01</span>
<span class="st">1882-03-01, 1885-05-01</span>
<span class="st">1887-03-01, 1888-04-01</span>
<span class="st">1890-07-01, 1891-05-01</span>
<span class="st">1893-01-01, 1894-06-01</span>
<span class="st">1895-12-01, 1897-06-01</span>
<span class="st">1899-06-01, 1900-12-01</span>
<span class="st">1902-09-01, 1904-08-01</span>
<span class="st">1907-05-01, 1908-06-01</span>
<span class="st">1910-01-01, 1912-01-01</span>
<span class="st">1913-01-01, 1914-12-01</span>
<span class="st">1918-08-01, 1919-03-01</span>
<span class="st">1920-01-01, 1921-07-01</span>
<span class="st">1923-05-01, 1924-07-01</span>
<span class="st">1926-10-01, 1927-11-01</span>
<span class="st">1929-08-01, 1933-03-01</span>
<span class="st">1937-05-01, 1938-06-01</span>
<span class="st">1945-02-01, 1945-10-01</span>
<span class="st">1948-11-01, 1949-10-01</span>
<span class="st">1953-07-01, 1954-05-01</span>
<span class="st">1957-08-01, 1958-04-01</span>
<span class="st">1960-04-01, 1961-02-01</span>
<span class="st">1969-12-01, 1970-11-01</span>
<span class="st">1973-11-01, 1975-03-01</span>
<span class="st">1980-01-01, 1980-07-01</span>
<span class="st">1981-07-01, 1982-11-01</span>
<span class="st">1990-07-01, 1991-03-01</span>
<span class="st">2001-03-01, 2001-11-01</span>
<span class="st">2007-12-01, 2009-06-01&quot;</span>), <span class="dt">sep=</span><span class="st">&#39;,&#39;</span>, 
<span class="dt">colClasses=</span><span class="kw">c</span>(<span class="st">&#39;Date&#39;</span>, <span class="st">&#39;Date&#39;</span>), 
<span class="dt">header=</span><span class="ot">TRUE</span>)

recessions_trim &lt;-<span class="st"> </span><span class="kw">subset</span>(recessions_df, Peak <span class="op">&gt;=</span><span class="st"> </span><span class="kw">min</span>(dat<span class="op">$</span>datem))
<span class="kw">ggplot</span>(<span class="dt">data =</span> dat) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> datem, <span class="dt">y =</span> r)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> avg, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_rect</span>(<span class="dt">data =</span> recessions_trim, 
            <span class="kw">aes</span>(<span class="dt">xmin =</span> Peak, <span class="dt">xmax =</span> Trough,
                <span class="dt">ymin =</span> <span class="op">-</span><span class="ot">Inf</span>, <span class="dt">ymax =</span> <span class="op">+</span><span class="ot">Inf</span>),
            <span class="dt">fill =</span> <span class="st">&quot;pink&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.3</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">&quot;Percent per year&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Real interest rates&quot;</span>, <span class="dt">subtitle =</span> <span class="st">&quot;with recession shading&quot;</span>)</code></pre></div>
<p><img src="computer_work_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
